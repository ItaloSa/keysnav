!function(e,n){"object"==typeof exports?module.exports=n("KeysNav"):e.KeysNav=n("KeysNav")}(this,function(e){"use strict";var n={keyLeft:37,keyUp:38,keyRight:39,keyDown:40,selectedClassName:"selected"},t=function(e){var t,i={};for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(i[t]=n[t]);for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i},i=function(e){var n=e.grid[e.lineIndex][e.columnIndex];document.getElementById(n).classList.add(e.options.selectedClassName)},s=function(e){var n=e.grid[e.lineIndex][e.columnIndex];document.getElementById(n).classList.remove(e.options.selectedClassName)},o=function(e,n){for(var t=e.lineIndex;t>=0;t--)if(1===n){if(e.grid[t].length-1>=e.columnIndex+1)return[t,e.columnIndex+n]}else if(e.columnIndex>0&&e.columnIndex<=e.grid[t].length-1)return[t,e.columnIndex+n]};function d(e){this.grid=null,this.lineIndex=0,this.columnIndex=0,this.customHandlers={},this.options=t(e),this.init()}return d.prototype={init:function(){document.onkeydown=this.handleKeyPress.bind(this)},setGrid:function(e){this.grid=e},setIndexes:function(e,n){this.lineIndex=e,this.columnIndex=n},handleKeyPress:function(e){var n,t=this.customHandlers[e.keyCode];if(t)t(e);else switch(e.keyCode){case this.options.keyUp:0!==(n=this).lineIndex&&(s(n),n.lineIndex--,n.columnIndex>n.grid[n.lineIndex].length-1&&(n.columnIndex=0),i(n));break;case this.options.keyDown:!function(e){e.lineIndex+1>e.grid.length-1||(s(e),e.lineIndex++,e.columnIndex>e.grid[e.lineIndex].length-1&&(e.columnIndex=0),i(e))}(this);break;case this.options.keyRight:!function(e){var n=o(e,1);n&&(s(e),e.setIndexes(n[0],n[1]),i(e))}(this);break;case this.options.keyLeft:!function(e){var n=o(e,-1);n&&(s(e),e.setIndexes(n[0],n[1]),i(e))}(this)}},addKeyHandler:function(e,n){this.customHandlers[e]=n}},d});